

举例: 
联盟成员收到攻击-> 发送通知给盟友 -> 盟友做出响应

## 观察者模式概述

使用频率最高的设计模式之一

定义如下:

> 定义对象之间的一种 一对多的依赖关系,使得每当一个对象状态发生改变的时候,相关以来的对象都能够得到通知并且被自动更新. 别名包括: 发布-订阅模式,(publish/subscribe). 它是一种行为型模式

观察者模式中,包含如下几个角色
1. subject 目标, 被观察的对象,在目标中定义了一个观察者的集合,一个观察目标可以接受任意数量的观察者,提供一系列的方法,增删观察者对象,同时 定义了通知方法 notify(). 目标类可以是接口,也可以是抽象类或者具体类

2. concrete subject 具体目标, 目标的子类.通常它包含经常发生改变的数据,当她的状态发生改变的时候,向观察者发出通知.同事它还实现了目标类中定义的抽象业务逻辑方法.

3. observer 观察者: 观察者将对观察目标的改变做出反应,观察者一般定义为接口,该接口声明了update()

4. concrete observer 具体观察者 在具体的观察者中维护一个指向具体目标对象的引用.存储具体观察者有关的状态.这些状态需要和具体目标的状态保持一致. 它实现了抽象观察者observer中定义的update() 方法. 通常在实现是,可以调用具体目标类的attach()方法, 将自己添加到目标类的集合中,通过detach()方法,将自己从目标类的集合中删除.

```java

abstract class Subject {

    protected List<Observer> observers = new ArrayList<>();
    public void attach(Observer observer) {
        observers.add(observer);
    }

    public void detach(Observer observer) {
        observers.remove(observer);
    }

    public abstract void notify();
}

// 具体类
class ConcreteSubject extends Subject {
    @overide
    public void notify() {
        for(Object obs: observers) {
            ((Observer)obs).update();
        }
    }
}

interface Observer {
    public void update();
}

class ConcreteObserver implements Observer {
    public void update();
}

```

